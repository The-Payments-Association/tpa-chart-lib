<div id="payments-chart-line" style="width: 100%; height: 700px; margin: 20px 0;"></div>

<script>
(function() {
  function loadScript(src) {
    return new Promise((resolve, reject) => {
      if (document.querySelector(`script[src="${src}"]`)) {
        resolve();
        return;
      }
      const s = document.createElement('script');
      s.src = src;
      s.onload = resolve;
      s.onerror = reject;
      document.head.appendChild(s);
    });
  }

  async function loadReactAndCharts() {
    try {
      if (!window.React || !window.ReactDOM) {
        await loadScript('https://unpkg.com/react@18/umd/react.production.min.js');
        await loadScript('https://unpkg.com/react-dom@18/umd/react-dom.production.min.js');
      }

      await loadScript('https://nimble-starlight-bed049.netlify.app/line-payments-charts.min.js');

      renderCharts();
    } catch (err) {
      console.error('Failed to load scripts:', err);
    }
  }

  function renderCharts() {
    // =====================
    // LINE CHART DATA EXAMPLES
    // =====================

    const singleLineData = [
      { name: "Q1 2024", volume: 145000 },
      { name: "Q2 2024", volume: 162000 },
      { name: "Q3 2024", volume: 158000 },
      { name: "Q4 2024", volume: 171000 }
    ];

    const twoLineData = [
      { name: "Q1 2024", volume: 145000, value: 32060 },
      { name: "Q2 2024", volume: 162000, value: 42150 },
      { name: "Q3 2024", volume: 158000, value: 43320 },
      { name: "Q4 2024", volume: 171000, value: 46840 },
      { name: "Q1 2025", volume: 189000, value: 51200 },
      { name: "Q2 2025", volume: 203000, value: 56780 }
    ];

    const threeLineData = [
      { name: "Q1 2024", volume: 145000, value: 32060, count: 12500 },
      { name: "Q2 2024", volume: 162000, value: 42150, count: 15300 },
      { name: "Q3 2024", volume: 158000, value: 43320, count: 14800 },
      { name: "Q4 2024", volume: 171000, value: 46840, count: 16200 }
    ];

    const fiveLineData = [
      { name: "Q1", volume: 145000, value: 32060, count: 12500, users: 8500, revenue: 125 },
      { name: "Q2", volume: 162000, value: 42150, count: 15300, users: 9200, revenue: 142 },
      { name: "Q3", volume: 158000, value: 43320, count: 14800, users: 8900, revenue: 138 },
      { name: "Q4", volume: 171000, value: 46840, count: 16200, users: 9800, revenue: 156 }
    ];

    const largeLineDataset = [
      { name: "Jan 2024", volume: 145000, value: 32060 },
      { name: "Feb 2024", volume: 162000, value: 42150 },
      { name: "Mar 2024", volume: 158000, value: 43320 },
      { name: "Apr 2024", volume: 171000, value: 46840 },
      { name: "May 2024", volume: 189000, value: 51200 },
      { name: "Jun 2024", volume: 203000, value: 56780 },
      { name: "Jul 2024", volume: 195000, value: 54300 },
      { name: "Aug 2024", volume: 187000, value: 52100 },
      { name: "Sep 2024", volume: 201000, value: 58200 },
      { name: "Oct 2024", volume: 215000, value: 61800 },
      { name: "Nov 2024", volume: 208000, value: 59400 },
      { name: "Dec 2024", volume: 225000, value: 65000 }
    ];

    const customLineData = [
      { name: "Period 1", volume: 100000, value: 25000 },
      { name: "Period 2", volume: 120000, value: 30000 },
      { name: "Period 3", volume: 115000, value: 28000 },
      { name: "Period 4", volume: 135000, value: 35000 }
    ];

    // =====================
    // RENDER CHART
    // =====================
    const chartData = largeLineDataset; // <-- Change to singleLineData, twoLineData, etc.

    if (window.PaymentsCharts && typeof window.PaymentsCharts.renderLineChart === 'function') {
      window.PaymentsCharts.renderLineChart('payments-chart-line', {
        data: chartData,
        title: 'Quarterly Payment Trends',
        showLogo: true,
        width: '100%',
        height: 400,
        sourceText: 'UK Finance quarterly payment data',
        sourceUrl: 'https://www.ukfinance.org.uk/data-and-research/payment-statistics',
        notesDescription: `This line chart shows quarterly payment trends over time. 

You can switch between example datasets:
- singleLineData: single metric line chart
- twoLineData: two metric lines
- threeLineData: three metric lines
- fiveLineData: five metric lines
- largeLineDataset: full year dataset
- customLineData: your custom periods
`
      });
    } else {
      console.error('PaymentsCharts.renderLineChart is not available yet.');
    }
  }

  loadReactAndCharts();
})();
</script>
